!function(){function t(t,e,a){var n=t[e];t[e]=function(){n.apply(this,arguments),a.apply(this)}}function e(t){var e=t.replace("(","").replace(")","").split(",");return e[0]=Number(e[0]),e[1]=Number(e[1]),isNaN(e[0])||isNaN(e[1])?(this.command="(0,0)",this.commandX=0,void(this.commandY=0)):(this.command=t,this.commandX=e[0],void(this.commandY=e[1]))}function a(){for(var t=document.getElementsByTagName("img"),a=0,n=t.length;n>a;a++){var i=t[a],s=i.getAttribute("cvs-src");if(s){var r=s.split("::"),h=r.length,c=o[r[0]];2===h&&c&&-1===c.indexOf(i)&&(i.setCommand=e,i.setCommand(r[1]),c.push(i))}}}function n(){for(var t=this.canvas.id,e=o[t],a=0,n=e.length;n>a;a++){var s=e[a];s.width=0===s.width?20:s.width,s.height=0===s.height?24:s.height;var r=this.getImageData(s.commandX,s.commandY,s.width,s.height);i.canvas.width=s.width,i.canvas.height=s.height,i.putImageData(r,0,0),s.src=i.canvas.toDataURL()}}var i=document.createElement("canvas").getContext("2d"),s=new Object,o=new Object,r=function(){for(var t=Object.keys(CanvasRenderingContext2D.prototype),e=[],a=0,n=t.length;n>a;a++)"function"==typeof this[t[a]]&&"getImageData"!==t[a]&&"putImageData"!==t[a]&&e.push(t[a]);return e}.apply(i),h=n;CanvasRenderingContext2D.prototype.release=function(){if(""===this.canvas.id)return void console.warn("Img.js :: Please set the dom id on the canvas element to identify it.");if(s[this.canvas.id])return void console.warn("Img.js :: An object that has already been released.");for(var e=0,n=r.length;n>e;e++)t(CanvasRenderingContext2D.prototype,r[e],h);s[this.canvas.id]=this.canvas.getContext("2d"),o[this.canvas.id]=new Array,CanvasRenderingContext2D.prototype.getImgTags=a,a()}}();